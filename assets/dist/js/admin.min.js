jQuery(document).ready((function(e){e(document).on("click","#reepay_capture",(function(t){t.preventDefault();var a=e(this).data("nonce"),r=e(this).data("order-id"),n=e(this);e.ajax({url:Reepay_Admin.ajax_url,type:"POST",data:{action:"reepay_capture",nonce:a,order_id:r},beforeSend:function(){n.data("text",n.html()),n.html(Reepay_Admin.text_wait),n.prop("disabled",!0)},success:function(e){if(n.html(n.data("text")),n.prop("disabled",!1),!e.success)return!1;window.location.href=location.href}})})),e(document).on("click","#reepay_cancel",(function(t){t.preventDefault();var a=e(this).data("nonce"),r=e(this).data("order-id"),n=e(this);e.ajax({url:Reepay_Admin.ajax_url,type:"POST",data:{action:"reepay_cancel",nonce:a,order_id:r},beforeSend:function(){n.data("text",n.html()),n.html(Reepay_Admin.text_wait),n.prop("disabled",!0)},success:function(e){n.html(n.data("text")),n.prop("disabled",!1),window.location.href=location.href}})})),e(document).on("click","#reepay_refund",(function(t){t.preventDefault();var a=e(this).data("nonce"),r=e(this).data("order-id"),n=e(this).data("amount"),o=e(this);e.ajax({url:Reepay_Admin.ajax_url,type:"POST",data:{action:"reepay_refund",nonce:a,order_id:r,amount:n},beforeSend:function(){o.data("text",o.html()),o.html(Reepay_Admin.text_wait),o.prop("disabled",!0)},success:function(e){if(o.html(o.data("text")),o.prop("disabled",!1),!e.success)return alert(e.data),!1;window.location.href=location.href},error:function(e){alert(e)}})})),e(document).on("click","#reepay_capture_partly",(function(t){t.preventDefault();var a=e(this).data("nonce"),r=e(this).data("order-id"),n=e("#reepay-capture_partly_amount-field").val(),o=e(this);e.ajax({url:Reepay_Admin.ajax_url,type:"POST",data:{action:"reepay_capture_partly",nonce:a,order_id:r,amount:n},beforeSend:function(){o.data("text",o.html()),o.html(Reepay_Admin.text_wait),o.prop("disabled",!0)},success:function(e){if(o.html(o.data("text")),o.prop("disabled",!1),!e.success)return alert(e.data),!1;window.location.href=location.href},error:function(e){alert("error response: "+JSON.stringify(e))}})})),e(document).on("click","#reepay_refund_partly",(function(t){console.log("refund_partually"),t.preventDefault();var a=e(this).data("nonce"),r=e(this).data("order-id"),n=e("#reepay-refund_partly_amount-field").val(),o=e(this);e.ajax({url:Reepay_Admin.ajax_url,type:"POST",data:{action:"reepay_refund_partly",nonce:a,order_id:r,amount:n},beforeSend:function(){o.data("text",o.html()),o.html(Reepay_Admin.text_wait),o.prop("disabled",!0)},success:function(e){if(o.html(o.data("text")),o.prop("disabled",!1),!e.success)return alert(e.data),!1;window.location.href=location.href},error:function(e){alert("error response: "+JSON.stringify(e))}})})),e(document).on("click","#woocommerce-order-actions .button",(function(t){t.preventDefault();var a=e("#reepay_order_id").data("order-id"),r=e("#reepay_order_total").data("order-total"),n=e("#reepay_order_total_authorized").val(),o=e("#reepay_order_total_settled").val(),i=e("#reepay_order_total").val();if(r>0&&o<n&&"wc-completed"==e("#order_status option:selected").val()){const t=window.confirm("You are about to change the order status. Do you want to capture the remaining amount of "+i+" at the same time? Click OK to continue with settle. Click Cancel to continue without settle.");e.ajax({url:Reepay_Admin.ajax_url,type:"POST",data:{action:"reepay_set_complete_settle_transient",nonce:Reepay_Admin.nonce,order_id:a,settle_order:Number(t)},beforeSend:function(){},success:function(){},error:function(e){alert("error response: "+JSON.stringify(e))},complete:function(){e("#post").submit()}})}else e("#post").submit()})),e("#reepay-capture_partly_amount-field, #reepay-refund_partly_amount-field").inputmask({alias:"currency",groupSeparator:""})}));